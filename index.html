<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>TX1 üë®üèΩ‚Äçüíªüíπ</title>
  <style>
    .container {
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #1e1f29;
      border-radius: 15px;
      color: #f5f6fa;
    }
    
    h1 {
      text-align: center;
      color: #6c5ce7;
    }
    
    .painel-central {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
    }
    
    .coluna-esquerda, .coluna-direita {
      flex: 1;
      padding: 15px;
      background: #2c2d3a;
      border-radius: 10px;
    }
    
    #comando {
      font-weight: bold;
      font-size: 1.2em;
      padding: 5px 10px;
      border-radius: 5px;
    }
    
    .esperar { background-color: #0984e3; }
    .call { background-color: #00b894; }
    .put { background-color: #ff7675; }
    
    button {
      padding: 8px 15px;
      margin-right: 10px;
      border: none;
      border-radius: 4px;
      cursor: pointer;
    }
    
    #criterios, #ultimos {
      max-height: 300px;
      overflow-y: auto;
    }
    
    .grafico {
      margin-top: 20px;
      border-radius: 10px;
      overflow: hidden;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>TX1 üë®üèΩ‚Äçüíªüíπ</h1>
    <div class="painel-central">
      <div class="coluna-esquerda">
        <p>Comando Atual: <span id="comando" class="esperar">ESPERAR</span></p>
        <p>Score de Confian√ßa: <span id="score">--%</span></p>
        <p>Pr√≥xima Leitura em: <span id="timer">60</span>s</p>
        <p>√öltima An√°lise: <span id="hora">--:--:--</span></p>
        <div>
          <h3>Crit√©rios T√©cnicos</h3>
          <ul id="criterios"></ul>
        </div>
        <div>
          <button onclick="registrar('WIN')">WIN</button>
          <button onclick="registrar('LOSS')">LOSS</button>
          <p>Hist√≥rico: <span id="historico">0 WIN / 0 LOSS</span></p>
        </div>
      </div>
      <div class="coluna-direita">
        <h3>√öltimos Sinais</h3>
        <ul id="ultimos"></ul>
      </div>
    </div>
    <!-- Alterado para BTC/USD -->
    <iframe class="grafico" 
            src="https://s.tradingview.com/widgetembed/?symbol=BINANCE:BTCUSDT&interval=1&theme=dark"
            width="100%" 
            height="350" 
            frameborder="0"></iframe>
  </div>
  
  <audio id="som-call" src="https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg" preload="auto"></audio>
  <audio id="som-put" src="https://actions.google.com/sounds/v1/alarms/beep_short.ogg" preload="auto"></audio>
  
  <script>
  // =============================================
  // C√ìDIGO JAVASCRIPT CORRIGIDO
  // =============================================
  const state = {
    // ... (manter o mesmo state do c√≥digo original)
  };

  const CONFIG = {
    // ... (manter o mesmo CONFIG do c√≥digo original)
  };

  // =============================================
  // CORRE√á√ÉO DO TIMER (SINCRONIZA√á√ÉO PRECISA)
  // =============================================
  function sincronizarTimer() {
    clearInterval(state.intervaloAtual);
    
    const agora = new Date();
    const segundos = agora.getSeconds();
    state.timer = 60 - segundos;
    
    const elementoTimer = document.getElementById("timer");
    if (elementoTimer) {
      elementoTimer.textContent = state.timer;
      elementoTimer.style.color = state.timer <= 5 ? 'red' : '';
    }
    
    state.intervaloAtual = setInterval(() => {
      const agora = new Date();
      const segundos = agora.getSeconds();
      state.timer = 60 - segundos;
      
      if (elementoTimer) {
        elementoTimer.textContent = state.timer;
        elementoTimer.style.color = state.timer <= 5 ? 'red' : '';
      }
      
      if (state.timer <= 0) {
        clearInterval(state.intervaloAtual);
        analisarMercado();
        sincronizarTimer();
      }
    }, 1000);
  }

  // =============================================
  // OUTRAS FUN√á√ïES (MANTIDAS COM MELHORIAS)
  // =============================================
  function formatarTimer(segundos) {
    return `${segundos}s`;
  }

  function atualizarRelogio() {
    const elementoHora = document.getElementById("hora");
    if (elementoHora) {
      const now = new Date();
      state.ultimaAtualizacao = now.toLocaleTimeString("pt-BR", {
        hour: '2-digit',
        minute: '2-digit',
        second: '2-digit'
      });
      elementoHora.textContent = state.ultimaAtualizacao;
    }
  }

  // ... (manter as outras fun√ß√µes do c√≥digo original)

  function atualizarInterface(sinal, score, tendencia, forcaTendencia) {
    const comandoElement = document.getElementById("comando");
    if (comandoElement) {
      comandoElement.textContent = sinal;
      comandoElement.className = sinal.toLowerCase();
    }
    
    const scoreElement = document.getElementById("score");
    if (scoreElement) {
      scoreElement.textContent = `${score}%`;
    }
  }

  // =============================================
  // INICIALIZA√á√ÉO CORRETA
  // =============================================
  document.addEventListener("DOMContentLoaded", () => {
    atualizarRelogio();
    sincronizarTimer();
    
    // Iniciar primeira an√°lise ap√≥s 1 segundo
    setTimeout(analisarMercado, 1000);
    
    // Atualizar rel√≥gio a cada segundo
    setInterval(atualizarRelogio, 1000);
  });

  // ... (manter o restante do c√≥digo original)
  </script>
</body>
</html>
